<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🐝 Mini Spelling Bee</title>
    <style>
        /* 전역 설정 - 8비트/픽셀 느낌 */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Courier New', monospace; /* 픽셀 느낌의 시스템 폰트 */
            background: linear-gradient(45deg, #e3f2fd 0%, #f3e5f5 50%, #e8f5e8 100%);
            min-height: 100vh;
            padding: 10px;
            /* 픽셀 느낌을 위한 이미지 렌더링 */
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        /* 도트 배경 패턴 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 25% 25%, #ffb3ba 2px, transparent 2px),
                radial-gradient(circle at 75% 75%, #bae1ff 2px, transparent 2px),
                radial-gradient(circle at 50% 90%, #baffc9 2px, transparent 2px);
            background-size: 50px 50px, 80px 80px, 60px 60px;
            z-index: -1;
            opacity: 0.6;
        }

        /* 메인 컨테이너 */
        .app {
            max-width: 500px;
            margin: 0 auto;
            position: relative;
        }

        /* 헤더 - 도트 스타일 */
        .header {
            background: #ffffff;
            border: 3px solid #333;
            border-radius: 0; /* 픽셀 느낌을 위해 각진 모서리 */
            padding: 15px;
            margin-bottom: 20px;
            position: relative;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.2); /* 8비트 그림자 */
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .title {
            font-size: 1.8rem;
            font-weight: bold;
            color: #333;
            text-shadow: 2px 2px 0 #fff;
        }

        /* 점수 배지 */
        .score-badge {
            background: #4caf50;
            color: white;
            padding: 8px 12px;
            border: 2px solid #333;
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* 게임 카드 */
        .game-card {
            background: #ffffff;
            border: 3px solid #333;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.2);
            position: relative;
        }

        /* 시작 화면 */
        .start-screen {
            text-align: center;
        }

        .start-button {
            background: #2196f3;
            color: white;
            border: 3px solid #333;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.1s;
            font-family: inherit;
        }

        .start-button:hover {
            background: #1976d2;
            transform: translate(-2px, -2px);
            box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
        }

        .start-button:active {
            transform: translate(2px, 2px);
            box-shadow: 1px 1px 0 rgba(0,0,0,0.3);
        }

        /* 게임 화면 */
        .game-screen {
            display: none;
        }

        /* 단어 표시 (점으로) */
        .word-dots {
            text-align: center;
            margin: 20px 0;
            font-size: 2rem;
            color: #666;
            letter-spacing: 8px;
        }

        /* 힌트 영역 */
        .hint-section {
            text-align: center;
            margin: 15px 0;
        }

        .hint-button {
            background: #ff9800;
            color: white;
            border: 2px solid #333;
            padding: 8px 16px;
            font-size: 0.9rem;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
        }

        .hint-button:hover {
            background: #f57c00;
        }

        .hint-text {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background: #fff3cd;
            border: 2px solid #333;
            color: #856404;
            font-weight: bold;
        }

        /* 입력 영역 */
        .input-section {
            margin: 20px 0;
        }

        .word-input {
            width: 100%;
            padding: 15px;
            border: 3px solid #333;
            font-size: 1.2rem;
            text-align: center;
            font-family: inherit;
            font-weight: bold;
            background: #f8f9fa;
        }

        .word-input:focus {
            outline: none;
            background: #e3f2fd;
            box-shadow: inset 0 0 0 2px #2196f3;
        }

        /* 버튼 영역 */
        .button-section {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .game-button {
            background: #4caf50;
            color: white;
            border: 3px solid #333;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            font-family: inherit;
            min-width: 100px;
        }

        .game-button:hover {
            background: #388e3c;
            transform: translate(-1px, -1px);
            box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
        }

        .game-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .next-button {
            background: #9c27b0;
        }

        .next-button:hover {
            background: #7b1fa2;
        }

        /* 결과 메시지 */
        .result-message {
            display: none;
            text-align: center;
            padding: 15px;
            margin: 15px 0;
            font-size: 1.2rem;
            font-weight: bold;
            border: 3px solid #333;
        }

        .result-correct {
            background: #c8e6c9;
            color: #2e7d32;
        }

        .result-wrong {
            background: #ffcdd2;
            color: #c62828;
        }

        /* 로그 영역 */
        .log-section {
            background: #ffffff;
            border: 3px solid #333;
            padding: 15px;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.2);
        }

        .log-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .log-item {
            display: flex;
            align-items: center;
            padding: 5px 0;
            border-bottom: 1px dotted #ccc;
            font-size: 0.9rem;
        }

        .log-item:last-child {
            border-bottom: none;
        }

        .log-icon {
            margin-right: 8px;
            font-size: 1.2rem;
        }

        /* 반응형 디자인 */
        @media (max-width: 600px) {
            .title {
                font-size: 1.4rem;
            }
            
            .game-card {
                padding: 20px;
            }
            
            .word-dots {
                font-size: 1.5rem;
                letter-spacing: 4px;
            }
            
            .header-content {
                gap: 10px;
            }
        }

        /* 접근성 - 포커스 표시 */
        button:focus,
        input:focus {
            outline: 3px solid #ff6b35;
            outline-offset: 2px;
        }

        /* 숨김 클래스 */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- 헤더 -->
        <div class="header">
            <div class="header-content">
                <h1 class="title">🐝 Mini Spelling Bee</h1>
                <div class="score-badge" id="scoreBadge" aria-label="점수">
                    0/0
                </div>
            </div>
        </div>

        <!-- 게임 카드 -->
        <div class="game-card">
            <!-- 시작 화면 -->
            <div class="start-screen" id="startScreen">
                <h2>영어 철자 맞히기 게임! 🌻</h2>
                <p style="margin: 20px 0; color: #666;">단어의 철자를 정확히 입력해보세요!</p>
                <button class="start-button" onclick="startGame()" aria-label="게임 시작">
                    🐝 게임 시작
                </button>
            </div>

            <!-- 게임 화면 -->
            <div class="game-screen" id="gameScreen">
                <!-- 단어 점 표시 -->
                <div class="word-dots" id="wordDots" aria-label="단어 길이"></div>

                <!-- 힌트 영역 -->
                <div class="hint-section">
                    <button class="hint-button" onclick="toggleHint()" id="hintButton" aria-label="힌트 보기">
                        💡 힌트 보기
                    </button>
                    <div class="hint-text" id="hintText" role="tooltip"></div>
                </div>

                <!-- 입력 영역 -->
                <div class="input-section">
                    <input 
                        type="text" 
                        class="word-input" 
                        id="wordInput" 
                        placeholder="영어 단어를 입력하세요"
                        aria-label="단어 입력"
                        autocomplete="off"
                    >
                </div>

                <!-- 결과 메시지 -->
                <div class="result-message" id="resultMessage" role="alert"></div>

                <!-- 버튼 영역 -->
                <div class="button-section">
                    <button 
                        class="game-button" 
                        onclick="checkAnswer()" 
                        id="checkButton"
                        aria-label="정답 확인"
                    >
                        📝 채점하기
                    </button>
                    <button 
                        class="game-button next-button hidden" 
                        onclick="nextQuestion()" 
                        id="nextButton"
                        aria-label="다음 문제"
                    >
                        ➡️ 다음
                    </button>
                </div>
            </div>
        </div>

        <!-- 로그 섹션 -->
        <div class="log-section" id="logSection" style="display: none;">
            <div class="log-title">📋 최근 결과</div>
            <div id="logContainer"></div>
        </div>
    </div>

    <script>
        // 게임 데이터 - 20개 단어와 한국어 뜻
        const WORDS_DATA = {
            "achievement": "성취",
            "adventure": "모험", 
            "ancient": "고대의",
            "attitude": "태도",
            "celebrate": "축하하다",
            "community": "공동체",
            "curious": "호기심 많은",
            "dangerous": "위험한",
            "environment": "환경",
            "experience": "경험",
            "festival": "축제",
            "friendship": "우정",
            "impossible": "불가능한",
            "interesting": "흥미로운",
            "knowledge": "지식",
            "language": "언어",
            "memorable": "기억할 만한",
            "ordinary": "평범한",
            "responsible": "책임감 있는",
            "tradition": "전통"
        };

        // 게임 상태 변수들
        let gameState = {
            currentWord: '',           // 현재 문제 단어
            wordsList: [],            // 사용 가능한 단어 목록 (중복 방지용)
            correctCount: 0,          // 정답 수
            totalCount: 0,           // 총 시도 수
            gameLog: [],             // 게임 로그 (최근 3건)
            isAnswered: false        // 현재 문제 답변 여부
        };

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            // 엔터키 이벤트 등록
            document.getElementById('wordInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    if (!gameState.isAnswered) {
                        checkAnswer();
                    } else {
                        nextQuestion();
                    }
                }
            });

            // 단어 목록 초기화
            resetWordsList();
        });

        /**
         * 게임 시작 함수
         */
        function startGame() {
            // 화면 전환
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            document.getElementById('logSection').style.display = 'block';

            // 첫 번째 문제 출제
            nextQuestion();

            // 입력창에 포커스
            document.getElementById('wordInput').focus();
        }

        /**
         * 단어 목록 초기화 (중복 방지용)
         */
        function resetWordsList() {
            gameState.wordsList = Object.keys(WORDS_DATA);
            shuffleArray(gameState.wordsList);
        }

        /**
         * 배열 섞기 함수 (Fisher-Yates 알고리즘)
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * 다음 문제 출제
         */
        function nextQuestion() {
            // 단어 목록이 비었으면 다시 초기화
            if (gameState.wordsList.length === 0) {
                resetWordsList();
            }

            // 랜덤 단어 선택 (목록에서 제거하여 중복 방지)
            const randomIndex = Math.floor(Math.random() * gameState.wordsList.length);
            gameState.currentWord = gameState.wordsList.splice(randomIndex, 1)[0];
            gameState.isAnswered = false;

            // UI 업데이트
            updateWordDots();
            resetInput();
            hideResult();
            hideHint();
            updateButtons();
        }

        /**
         * 단어를 점으로 표시 (글자 수만큼)
         */
        function updateWordDots() {
            const dotCount = gameState.currentWord.length;
            const dots = '●'.repeat(dotCount);
            document.getElementById('wordDots').textContent = dots;
            document.getElementById('wordDots').setAttribute('aria-label', `${dotCount}글자 단어`);
        }

        /**
         * 입력창 초기화
         */
        function resetInput() {
            const input = document.getElementById('wordInput');
            input.value = '';
            input.disabled = false;
        }

        /**
         * 힌트 토글
         */
        function toggleHint() {
            const hintText = document.getElementById('hintText');
            const hintButton = document.getElementById('hintButton');
            
            if (hintText.style.display === 'none' || !hintText.style.display) {
                // 힌트 보기
                hintText.textContent = `💡 ${WORDS_DATA[gameState.currentWord]}`;
                hintText.style.display = 'block';
                hintButton.textContent = '🙈 힌트 숨기기';
                hintButton.setAttribute('aria-label', '힌트 숨기기');
            } else {
                // 힌트 숨기기
                hideHint();
            }
        }

        /**
         * 힌트 숨기기
         */
        function hideHint() {
            const hintText = document.getElementById('hintText');
            const hintButton = document.getElementById('hintButton');
            
            hintText.style.display = 'none';
            hintButton.textContent = '💡 힌트 보기';
            hintButton.setAttribute('aria-label', '힌트 보기');
        }

        /**
         * 정답 확인
         */
        function checkAnswer() {
            const userInput = document.getElementById('wordInput').value.trim().toLowerCase();
            const correctAnswer = gameState.currentWord.toLowerCase();

            // 빈 입력 체크
            if (!userInput) {
                alert('단어를 입력해주세요!');
                return;
            }

            // 이미 답변했는지 체크
            if (gameState.isAnswered) {
                return;
            }

            // 답변 처리
            gameState.isAnswered = true;
            gameState.totalCount++;

            let isCorrect = userInput === correctAnswer;
            
            if (isCorrect) {
                gameState.correctCount++;
                showResult(true, '🐝 정답입니다!');
            } else {
                showResult(false, `😅 틀렸습니다! 정답: ${gameState.currentWord}`);
            }

            // 로그 추가
            addToLog(isCorrect, gameState.currentWord);

            // 점수 업데이트
            updateScore();

            // 버튼 상태 변경
            updateButtons();

            // 입력창 비활성화
            document.getElementById('wordInput').disabled = true;
        }

        /**
         * 결과 표시
         */
        function showResult(isCorrect, message) {
            const resultDiv = document.getElementById('resultMessage');
            resultDiv.textContent = message;
            resultDiv.className = `result-message ${isCorrect ? 'result-correct' : 'result-wrong'}`;
            resultDiv.style.display = 'block';

            // 접근성을 위한 aria-live 업데이트
            resultDiv.setAttribute('aria-live', 'polite');
        }

        /**
         * 결과 숨기기
         */
        function hideResult() {
            document.getElementById('resultMessage').style.display = 'none';
        }

        /**
         * 점수 업데이트
         */
        function updateScore() {
            const scoreBadge = document.getElementById('scoreBadge');
            scoreBadge.textContent = `${gameState.correctCount}/${gameState.totalCount}`;
            scoreBadge.setAttribute('aria-label', `${gameState.totalCount}번 중 ${gameState.correctCount}번 정답`);
        }

        /**
         * 버튼 상태 업데이트
         */
        function updateButtons() {
            const checkButton = document.getElementById('checkButton');
            const nextButton = document.getElementById('nextButton');

            if (gameState.isAnswered) {
                // 답변 후 상태
                checkButton.style.display = 'none';
                nextButton.classList.remove('hidden');
                nextButton.focus(); // 다음 버튼에 포커스
            } else {
                // 답변 전 상태
                checkButton.style.display = 'inline-block';
                nextButton.classList.add('hidden');
            }
        }

        /**
         * 로그에 결과 추가 (최근 3개만 유지)
         */
        function addToLog(isCorrect, word) {
            const logItem = {
                isCorrect: isCorrect,
                word: word,
                timestamp: Date.now()
            };

            // 맨 앞에 추가
            gameState.gameLog.unshift(logItem);

            // 최대 3개까지만 유지
            if (gameState.gameLog.length > 3) {
                gameState.gameLog = gameState.gameLog.slice(0, 3);
            }

            // 로그 UI 업데이트
            updateLogDisplay();
        }

        /**
         * 로그 화면 업데이트
         */
        function updateLogDisplay() {
            const logContainer = document.getElementById('logContainer');
            
            if (gameState.gameLog.length === 0) {
                logContainer.innerHTML = '<div style="color: #999;">아직 결과가 없습니다.</div>';
                return;
            }

            let html = '';
            gameState.gameLog.forEach(item => {
                const icon = item.isCorrect ? '🐝' : '😅';
                const className = item.isCorrect ? 'correct' : 'wrong';
                html += `
                    <div class="log-item">
                        <span class="log-icon">${icon}</span>
                        <span>${item.word}</span>
                    </div>
                `;
            });

            logContainer.innerHTML = html;
        }
    </script>
</body>
</html>
